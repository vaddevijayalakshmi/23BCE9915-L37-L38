<!DOCTYPE html>
<html>
<head>
<title>Registration Form</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #e6f0ff;
  }

  form {
    width: 420px;
    margin: 60px auto;
    padding: 25px;
    background: white;
    border-radius: 8px;
  }

  h2 {
    text-align: center;
    font-size: 26px;
  }

  input, select, button {
    width: 100%;
    padding: 12px;
    font-size: 16px;
    box-sizing: border-box;
  }

  input, select {
    display: block;
    margin-bottom: 2px;
  }

  small {
    display: block;
    min-height: 18px;  /* reserve vertical space for error message */
    margin-bottom: 12px; /* space below error message */
    font-size: 14px;
    color: red;
  }

  button {
    margin-top: 20px;
    background: #007bff;
    color: white;
    border: none;
    font-size: 18px;
    cursor: pointer;
  }

  button:hover {
    background: #0056b3;
  }

  .error {
    border: 2px solid red;
  }

  .hide {
    display: none;
  }
</style>
</head>

<body>

<form id="form">
  <h2>Registration</h2>

  <input id="name" placeholder="Full Name">
  <small id="nameErr"></small>

  <input id="email" placeholder="Email Address">
  <small id="emailErr"></small>

  <input type="password" id="pass" placeholder="Password">
  <small id="passErr"></small>

  <input type="password" id="cpass" placeholder="Confirm Password">
  <small id="cpassErr"></small>

  <input type="number" id="age" placeholder="Age">
  <small id="ageErr"></small>

  <select id="role">
    <option value="">Select Role</option>
    <option>Student</option>
    <option>Teacher</option>
    <option>Admin</option>
  </select>
  <small id="roleErr"></small>

  <input id="skill" placeholder="Skill (Teachers only)" class="hide">
  <small id="skillErr" class="hide"></small>

  <button type="submit">Register</button>
</form>

<script>
const form = document.getElementById("form");
const role = document.getElementById("role");
const skill = document.getElementById("skill");
const skillErr = document.getElementById("skillErr");

role.addEventListener("change", () => {
  const showSkill = role.value === "Teacher";
  skill.classList.toggle("hide", !showSkill);
  skillErr.classList.toggle("hide", !showSkill);
  validateForm();
});

form.addEventListener("input", validateForm);

form.addEventListener("submit", e => {
  e.preventDefault();
  if (validateForm()) {
    alert("Registration Successful!");
    form.reset();
    skill.classList.add("hide");
    skillErr.classList.add("hide");
  }
});

function validateForm() {
  let valid = true;

  valid = check("name", "nameErr", v => v.trim().length >= 3, "Minimum 3 characters") && valid;
  valid = check("email", "emailErr", v => v.trim().endsWith("@gmail.com"), "Use Gmail only") && valid;
  valid = check(
    "pass",
    "passErr",
    v => role.value === "Admin" ? v.length >= 8 && /\d/.test(v) : v.length >= 5,
    "Weak password"
  ) && valid;
  valid = check("cpass", "cpassErr", v => v === pass.value, "Passwords do not match") && valid;
  valid = check("age", "ageErr", v => Number(v) >= 18, "Age must be 18+") && valid;
  valid = check("role", "roleErr", v => v !== "", "Please select role") && valid;

  if (role.value === "Teacher") {
    valid = check("skill", "skillErr", v => v.trim().length > 0, "Skill required for teachers") && valid;
  }

  return valid;
}

function check(id, errId, rule, msg) {
  const el = document.getElementById(id);
  const err = document.getElementById(errId);
  const val = el.value.trim();

  if (!rule(val)) {
    el.classList.add("error");
    err.textContent = msg;
    return false;
  }

  el.classList.remove("error");
  err.textContent = "";
  return true;
}
</script>

</body>
</html>
